# SNS QR Card App - 完全仕様書

## 1. アプリケーション概要

**名称**: LinkFlip  
**目的**: bento.meやlinktr.eeのようなSNSアカウント表示アプリ。各カードをタップするとQRコードが表示され、名刺代わりにスマートフォンを取り出してSNSを共有できる。

**主な特徴**:
- SNS URLを入力すると、プラットフォームが自動判定される
- 自動判定されたプラットフォームのアイコンがホーム画面のグリッドに表示される
- ユーザーが画像ギャラリーから自分の画像を選択することも可能
- グリッドをタップするとカードがflipして裏返り、QRコードが表示される
- オフライン動作（ローカルストレージに保存）
- シンプルで洗練されたUI/UX

---

## 2. 画面構成

### 2.1 ホーム画面（メイン画面）

**レイアウト**:
- ステータスバー下に、ユーザープロフィール情報を表示
- プロフィール情報の下に、SNSカードをグリッド表示（2列）
- 画面下部にタブバー（ホーム、設定）

**プロフィール情報セクション**:
- プロフィール画像（円形、120px）
- ユーザー名（テキスト、28px bold）
- バイオ（説明文、14px regular、2行まで）
- 編集ボタン（歯車アイコン、右上）

**SNSカードグリッド**:
- 2列レイアウト、16pxのガター
- 各カードサイズ：約160px × 140px
- カード表面の内容：
  - SNSプラットフォームアイコン（48px）またはカスタム画像（48px）
  - プラットフォーム名（16px semibold）
  - ユーザー名/ハンドル（12px regular）
- カードの角丸：16px
- カードの背景：surface色
- カードのシャドウ：軽い影
- タップ時のフィードバック：スケール 0.95、不透明度 0.8

**スクロール動作**:
- ScrollViewで縦スクロール
- スムーズなスクロール体験

---

### 2.2 Flip アニメーション（カード反転）

**トリガー**: ホーム画面のカードをタップ

**アニメーション仕様**:
1. **Flip In**: カードが Y 軸を中心に回転（0° → 90°）
   - 継続時間: 150ms
   - イージング: ease-out
   - 中間地点（90°）で表面から裏面に切り替え

2. **Flip Out**: 裏面が表示状態に（90° → 180°）
   - 継続時間: 150ms
   - イージング: ease-out
   - 合計時間: 300ms

**裏面（QRコード表示）**:
- 大きなQRコード（120px × 120px、中央）
- QRコード下部: プラットフォーム名（14px semibold）
- さらに下部: ユーザー名（12px regular）
- 裏面の背景：ライトモード `#ffffff`、ダークモード `#151718`
- 裏面のシャドウ: 表面と同じ

**Flip 解除（元に戻す）**:
- トリガー: 裏面をもう一度タップ、または背景をタップ、または自動で 5 秒後に元に戻す
- アニメーション: 180° → 90° → 0°（合計300ms）

---

### 2.3 SNSアカウント追加フロー（URL入力による自動判定）

**トリガー**: 設定画面の「SNSアカウントを追加」ボタン

**ステップ1: URL入力**
- テキスト入力フィールドにSNS URLを入力（例：`https://twitter.com/username`）
- 入力と同時にプラットフォームが自動判定される

**ステップ2: プラットフォーム判定結果表示**
- 判定成功時：プラットフォーム名とアイコンを表示
- 判定失敗時：「サポートされていないプラットフォームです」エラーメッセージ

**ステップ3: カスタム画像選択（オプション）**
- 「画像を選択」ボタンをタップしてデバイスの画像ギャラリーから選択
- 画像プレビュー表示
- スキップ可能（デフォルトアイコンを使用）

**ステップ4: 保存**
- 「保存」ボタンをタップ
- ホーム画面にカードが追加される

**バリデーション**:
- URLは空でない
- URLから有効なSNSプラットフォームを判定可能
- 画像サイズ：5MB以下
- 画像形式：JPEG、PNG、WebP

---

### 2.4 設定画面

**レイアウト**:
- タブバーから「設定」をタップで遷移
- ScrollViewで縦スクロール

**セクション1：プロフィール編集**:
- プロフィール画像（編集可能、タップで画像ピッカーを開く）
- ユーザー名（テキスト入力、最大50文字）
- バイオ（テキスト入力、最大150文字）
- 保存ボタン（primary色）

**セクション2：SNSアカウント管理**:
- 「SNSアカウントを追加」ボタン
- 追加済みアカウントのリスト：
  - 各アカウント行：アイコン + プラットフォーム名 + ユーザー名
  - 右側：編集アイコン、削除アイコン
  - ドラッグハンドル（左側）でドラッグして順序変更可能

**セクション3：アプリ設定**:
- ダークモード切り替え（トグル）
- 「このアプリについて」セクション（アプリバージョン、ライセンス情報）

---

## 3. データモデル

### 3.1 SNSカード

```typescript
interface SNSCard {
  id: string;                    // ユニークID（タイムスタンプ + ランダム）
  platform: SNSPlatform;         // プラットフォーム種別
  username: string;              // ユーザー名/ハンドル
  url: string;                   // 完全なURL（例：https://twitter.com/username）
  order: number;                 // 表示順序（0から始まる）
  createdAt: number;             // 作成日時（タイムスタンプ）
  customImage?: string | null;   // Base64 画像データ（オプション）
  useCustomImage: boolean;       // true: カスタム画像を使用、false: デフォルトアイコンを使用
}

type SNSPlatform = 
  | 'twitter' 
  | 'instagram' 
  | 'linkedin' 
  | 'youtube' 
  | 'github' 
  | 'tiktok' 
  | 'facebook' 
  | 'threads' 
  | 'bluesky'
  | 'discord'
  | 'telegram'
  | 'whatsapp';
```

### 3.2 ユーザープロフィール

```typescript
interface UserProfile {
  id: string;                    // ユーザーID（固定：'default'）
  name: string;                  // ユーザー名（デフォルト：'Your Name'）
  bio: string;                   // バイオ/説明（デフォルト：'Add your bio here'）
  profileImage: string | null;   // プロフィール画像URI（Base64またはファイルパス）
  snsCards: SNSCard[];           // SNSカードの配列
  updatedAt: number;             // 最終更新日時（タイムスタンプ）
}
```

### 3.3 QRコードデータ

```typescript
interface QRCodeData {
  url: string;                   // QRコードに含めるURL
  platform: SNSPlatform;         // プラットフォーム種別
  username: string;              // ユーザー名
}
```

---

## 4. 必要な機能

### 4.1 コア機能

| 機能 | 説明 | 優先度 |
|------|------|--------|
| **URL自動判定** | SNS URLからプラットフォームを自動判定 | 必須 |
| **SNSカード表示** | ホーム画面にSNSカードを2列グリッドで表示 | 必須 |
| **QRコード生成** | SNS URLからQRコードを動的に生成 | 必須 |
| **Flip アニメーション** | カードをタップしてflipしてQRコードを表示 | 必須 |
| **シェア機能** | QRコード画像とリンクをシステムシェアシートで共有 | 必須 |
| **コピー機能** | SNS URLをクリップボードにコピー | 必須 |
| **プロフィール管理** | ユーザー名、バイオ、プロフィール画像を編集・保存 | 必須 |
| **SNSアカウント追加** | 新しいSNSアカウントを追加 | 必須 |
| **SNSアカウント編集** | 既存のSNSアカウント情報を編集 | 必須 |
| **SNSアカウント削除** | SNSアカウントを削除 | 必須 |
| **カスタム画像選択** | 画像ギャラリーからカスタム画像を選択 | 必須 |
| **カード順序変更** | ドラッグ&ドロップで表示順序を変更 | 推奨 |
| **ローカルストレージ** | AsyncStorageにプロフィール・カード情報を永続化 | 必須 |
| **ダークモード** | システムの設定に応じたダークモード対応 | 推奨 |

### 4.2 UI/UX機能

| 機能 | 説明 | 優先度 |
|------|------|--------|
| **ハプティクス** | カード・ボタンタップ時の触覚フィードバック | 推奨 |
| **プレス状態アニメーション** | カード・ボタンのスケール・不透明度変化 | 推奨 |
| **ローディング状態** | 画像読み込み時のローディング表示 | 推奨 |
| **エラーハンドリング** | 無効なURLなどのエラー処理 | 推奨 |
| **トースト通知** | コピー成功などの短い通知 | 推奨 |

### 4.3 プラットフォーム対応

| プラットフォーム | 対応状況 | 備考 |
|-----------------|--------|------|
| **iOS** | 必須 | iPhone対応、Safe Area対応 |
| **Android** | 必須 | Android対応、ナビゲーションバー対応 |
| **Web** | 推奨 | レスポンシブデザイン対応 |

---

## 5. 対応SNSプラットフォーム

| プラットフォーム | URL パターン | ユーザー名例 | 判定ロジック |
|-----------------|-------------|------------|-----------|
| **Twitter** | `https://twitter.com/{username}` | `@username` | URLに `twitter.com` を含む |
| **Instagram** | `https://instagram.com/{username}` | `@username` | URLに `instagram.com` を含む |
| **LinkedIn** | `https://linkedin.com/in/{username}` | `username` | URLに `linkedin.com/in` を含む |
| **YouTube** | `https://youtube.com/@{username}` | `@username` | URLに `youtube.com/@` を含む |
| **GitHub** | `https://github.com/{username}` | `username` | URLに `github.com` を含む |
| **TikTok** | `https://tiktok.com/@{username}` | `@username` | URLに `tiktok.com/@` を含む |
| **Facebook** | `https://facebook.com/{username}` | `username` | URLに `facebook.com` を含む |
| **Threads** | `https://threads.net/@{username}` | `@username` | URLに `threads.net/@` を含む |
| **Bluesky** | `https://bsky.app/profile/{username}` | `username` | URLに `bsky.app/profile` を含む |
| **Discord** | `https://discord.gg/{code}` | `invite-code` | URLに `discord.gg` を含む |
| **Telegram** | `https://t.me/{username}` | `@username` | URLに `t.me` を含む |
| **WhatsApp** | `https://wa.me/{phone}` | `phone-number` | URLに `wa.me` を含む |

---

## 6. 技術スタック

| レイヤー | 技術 | 理由 |
|---------|------|------|
| **フレームワーク** | React Native (Expo 54) | クロスプラットフォーム対応 |
| **ルーティング** | Expo Router | ファイルベースルーティング |
| **スタイリング** | NativeWind (Tailwind CSS) | 統一的なスタイリング |
| **状態管理** | React Context + AsyncStorage | シンプルで十分 |
| **QRコード生成** | `qrcode` npm package | 軽量で信頼性が高い |
| **画像選択** | `expo-image-picker` | ネイティブ画像ピッカー |
| **クリップボード** | `expo-clipboard` | クリップボード操作 |
| **シェア** | `expo-sharing` + `react-native-share` | システムシェアシート |
| **ハプティクス** | `expo-haptics` | 触覚フィードバック |
| **ローカルストレージ** | `@react-native-async-storage/async-storage` | 永続化 |
| **アニメーション** | `react-native-reanimated` | Flip アニメーション |
| **アイコン** | `simple-icons` | SNS専用アイコン（CC0ライセンス） |

---

## 7. ユーザーフロー

### 7.1 初回起動フロー

1. アプリ起動
2. ホーム画面表示（デフォルトプロフィール「Your Name」）
3. 設定画面でプロフィール編集
4. SNSアカウント追加（URL入力 → 自動判定 → 画像選択（オプション） → 保存）
5. ホーム画面に追加したカードが表示される

### 7.2 QRコード表示フロー

1. ホーム画面でSNSカードをタップ
2. Flip アニメーション実行
3. QRコード表示（裏面）
4. [シェア] [コピー] [戻す] ボタン表示
5. ユーザーが操作
6. [戻す] をタップ または 5秒後
7. Flip アニメーション実行（元に戻る）

### 7.3 リンクコピーフロー

1. ホーム画面でSNSカードをタップ
2. QRコード表示（裏面）
3. コピーボタンをタップ
4. リンクがクリップボードにコピーされ、トースト表示
5. 他のアプリに貼り付け可能

### 7.4 カード管理フロー

1. タブバーから設定画面へ遷移
2. 「SNSアカウントを追加」をタップ
3. URL入力 → プラットフォーム自動判定 → 画像選択（オプション） → 保存
4. ホーム画面に新しいカードが追加される
5. 編集・削除・順序変更が可能

---

## 8. デザイン仕様

### 8.1 カラーパレット

| 用途 | ライトモード | ダークモード |
|------|-----------|-----------|
| **背景** | `#ffffff` | `#151718` |
| **サーフェス** | `#f5f5f5` | `#1e2022` |
| **テキスト主** | `#11181C` | `#ECEDEE` |
| **テキスト副** | `#687076` | `#9BA1A6` |
| **ボーダー** | `#E5E7EB` | `#334155` |
| **プライマリ** | `#0a7ea4` | `#0a7ea4` |
| **成功** | `#22C55E` | `#4ADE80` |
| **警告** | `#F59E0B` | `#FBBF24` |
| **エラー** | `#EF4444` | `#F87171` |

### 8.2 タイポグラフィ

| 用途 | サイズ | ウェイト | 行高 |
|------|--------|---------|------|
| **ページタイトル** | 28px | bold | 1.2 |
| **セクションタイトル** | 20px | semibold | 1.3 |
| **カードタイトル** | 16px | semibold | 1.3 |
| **本文** | 14px | regular | 1.5 |
| **小文字** | 12px | regular | 1.4 |
| **キャプション** | 11px | regular | 1.3 |

### 8.3 スペーシング

| 用途 | サイズ |
|------|--------|
| **画面パディング** | 16px |
| **セクション間隔** | 24px |
| **要素間隔** | 12px |
| **カードガター** | 16px |

### 8.4 コーナー半径

| 要素 | 半径 |
|------|------|
| **カード** | 16px |
| **ボタン** | 12px |
| **入力フィールド** | 12px |
| **モーダル** | 20px |

---

## 9. 制約事項

- **データ保存**: すべてのデータ（プロフィール、SNSカード、プロフィール画像）はAsyncStorageにローカル保存。クラウド同期やバックエンド連携なし
- **オフライン動作**: インターネット接続なしでもアプリは動作（ローカルストレージから読み込み）
- **QRコード生成**: クライアント側で生成（サーバー不要）
- **画像保存**: プロフィール画像とカスタム画像はBase64形式でAsyncStorageに保存
- **バージョン**: Expo SDK 54、React Native 0.81、React 19
- **最小OS**: iOS 13+、Android 8+
- **アイコンライセンス**: Simple Icons（CC0 1.0 Universal - パブリックドメイン）を使用

---

## 10. 今後の拡張可能性

- QRコードのカスタマイズ（色、ロゴ埋め込み）
- テンプレート機能（複数のプロフィール管理）
- エクスポート機能（プロフィールをJSONで出力）
- インポート機能（他のデバイスからプロフィールをインポート）
